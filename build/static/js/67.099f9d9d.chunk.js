"use strict";(self.webpackChunkphoto_share=self.webpackChunkphoto_share||[]).push([[67],{7758:function(t,e,n){n.d(e,{Z:function(){return B}});var o=n(1413),r=n(4165),a=n(5861),s=n(9439),i=n(9195),l=n(4695),c=n(6817),p=n(803),u=n(3811),d=n(4565),h=n(9365),x=n(6746),m=n(7205),g=(n(2791),n(7689)),f=n(4343),b=n(9823),Z=n(306),v=function(t){return{backdrop:{display:"flex",alignItems:"center",justifyContent:"center"},wrapper:{bgcolor:"background.default",mx:2,py:2,px:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",borderRadius:4},title:{color:t.palette.text.standard,textAlign:"center",mx:"auto",my:2,wordBreak:"break-word"},form:{display:"flex",flexDirection:"column",width:"90%"},label:{my:1},submitButton:{alignSelf:"end",mt:2}}},j=n(2436),k=n(5468),y=n(5592),w=n(1452),I=n(3329),C=function(t){return"function"===typeof t};var B=function(t){var e=t.closeModal,n=t.isModalOpen,B=t.onCreate,L=t.refetch,S=t.postId,M=w.Z.useCreateCollectionMutation(),T=(0,s.Z)(M,2),A=T[0],W=T[1].isLoading,N=(0,i.cI)({resolver:(0,l.X)(f.LP),mode:"all"}),_=N.register,P=N.reset,E=N.handleSubmit,F=N.formState.errors,O=F.title,R=F.tags,U=(0,g.s0)(),z=E((function(t){var e=t.title,n=t.tags.split(" ");D({title:e,tags:n})})),D=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A({body:n}).unwrap();case 3:o=t.sent,P(),e(),C(B)&&B(n.title,o.data.collection._id,S),C(L)&&(L(),U("/post/create/".concat(o.data.collection._id))),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),H=(0,Z.Z)(v),K=(0,j.Z)({componentNameKey:"CreateCollectionModal"}),X=null!==O&&void 0!==O&&O.message?K(O.message):K("titleLabel"),Y=null!==R&&void 0!==R&&R.message?K(R.message):K("tagsLabel");return(0,I.jsxs)(I.Fragment,{children:[n&&(0,I.jsx)(k.Z,{keyOfTitle:"createCollectionModal"}),(0,I.jsx)(c.Z,{open:n,onClose:e,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:H.backdrop,children:(0,I.jsx)(p.Z,{sx:H.wrapper,maxWidth:"tablet",children:W?(0,I.jsx)(y.Z,{withMeta:!0}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.Z,{color:"error",sx:{alignSelf:"end"},onClick:e,children:(0,I.jsx)(b.Z,{})}),(0,I.jsx)(d.Z,{variant:"h3",sx:H.title,children:K("title")}),(0,I.jsxs)("form",{style:H.form,onSubmit:z,children:[(0,I.jsx)(h.Z,{htmlFor:"title",error:!!O,sx:H.label,children:X}),(0,I.jsx)(x.Z,(0,o.Z)({fullWidth:!0,id:"title"},_("title"))),(0,I.jsx)(h.Z,{htmlFor:"tags",error:!!R,sx:H.label,children:Y}),(0,I.jsx)(x.Z,(0,o.Z)({fullWidth:!0,id:"tags"},_("tags"))),(0,I.jsx)(m.Z,{type:"submit",variant:"outlined",sx:H.submitButton,children:K("submitButton")})]})]})})})]})}},9067:function(t,e,n){n.r(e),n.d(e,{default:function(){return M}});var o=n(2797),r=n(4142),a=function(){var t=(0,r.Z)();return{isSmallerThanLaptop:(0,o.Z)(t.breakpoints.down("laptop")),isSmallerThanTablet:(0,o.Z)(t.breakpoints.down("tablet")),isSmallerThanMobile:(0,o.Z)(t.breakpoints.down("mobile"))}},s=n(306),i=n(111);var l=n(6015),c=n(7964),p=n(9439),u=n(7083),d=n(5226),h=n(1087),x=n(2791),m=n(8882),g=n(7758),f=n(4942),b=n(277),Z=function(t){return{postItem:{display:"inline-block","&:hover .buttonsBar":{opacity:1},width:"100%"},postItemWrapper:{position:"relative","&:hover .postImage":{filter:"brightness(80%)"}},image:{width:"100%",borderRadius:"8px",backgroundColor:t.palette.primary.main},postTopButtonsWrapper:(0,f.Z)({display:"flex",alignItems:"center",padding:.5,position:"absolute",top:"0",right:"0",zIndex:100,opacity:0},t.breakpoints.down("laptop"),{opacity:100}),postBottomButtonsWrapper:(0,f.Z)({display:"flex",alignItems:"center",padding:.5,position:"absolute",top:"100%",transform:"translateY(-110%)",zIndex:100,opacity:0,color:t.palette.text.light},t.breakpoints.down("laptop"),{opacity:100}),postItemTitleWrapper:(0,f.Z)({px:.5,pb:1,whiteSpace:"break-spaces",wordBreak:"break-all"},t.breakpoints.down("tablet"),{pl:.5,pr:0,pb:0}),authorAvatar:(0,f.Z)({width:"40px",height:"40px"},t.breakpoints.down("tablet"),{width:32,height:32}),authorUsername:{ml:1}}},v=(0,b.ZP)(h.OL)((function(t){return{display:"flex",alignItems:"center",justifyContent:"start","&:hover p":{color:t.theme.palette.primary.main}}})),j=n(3811),k=n(4565),y=n(7237),w=n(7488),I=n(3329);function C(t){var e=t.onToggleLike,n=t.isLiked,o=t.likesCount,r=(0,s.Z)(Z);return(0,I.jsxs)(l.Z,{sx:r.postBottomButtonsWrapper,className:"buttonsBar",children:[(0,I.jsx)(j.Z,{sx:{color:"currentColor"},onClick:e,children:n?(0,I.jsx)(y.Z,{color:"secondary"}):(0,I.jsx)(w.Z,{})}),(0,I.jsx)(k.Z,{sx:{ml:.5,color:"currentColor"},children:o})]})}var B=n(3978);function L(t){var e=t.postId,n=t.title,o=t.formattedTags,r=t.authorId,a=t.avatarURL,i=t.username,c=t.showAuthor,p=(0,s.Z)(Z);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.Z,{sx:p.postItemTitleWrapper,children:(0,I.jsxs)(h.OL,{to:"/posts/".concat(e),children:[(0,I.jsx)(k.Z,{sx:{mb:"-4px"},variant:"h6",children:n}),(0,I.jsx)(k.Z,{variant:"caption",children:o})]})}),c&&(0,I.jsxs)(v,{to:"/users/".concat(r),children:[(0,I.jsx)(B.Z,{sx:p.authorAvatar,src:a||""}),(0,I.jsx)(k.Z,{className:"username",sx:p.authorUsername,children:i})]})]})}var S=function(t){var e=t.post,n=t.postsActions,o=t.showAuthor,r=void 0===o||o,a=(0,x.useState)(!1),i=(0,p.Z)(a,2),c=i[0],f=i[1],b=n.toggleLike,v=n.toggleSave,j=n.updateSavesInfo,k=e._id,y=e.author,w=e.title,B=e.tags,S=e.likesCount,M=e.image,T=e.isLiked,A=e.isSomewhereSaved,W=e.savesInfo,N=y.username,_=y._id,P=y.avatar,E=void 0===P?"":P,F=B.join(" "),O=(0,s.Z)(Z);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(g.Z,{onCreate:j,postId:e._id,closeModal:function(){return f(!1)},isModalOpen:c}),(0,I.jsxs)(u.Z,{sx:O.postItem,children:[(0,I.jsxs)(l.Z,{sx:O.postItemWrapper,children:[(0,I.jsx)(h.OL,{to:"/posts/".concat(k),children:(0,I.jsx)("img",{src:M,style:O.image,className:"postImage",alt:w,loading:"lazy",role:"presentation",decoding:"async"})}),(0,I.jsx)(l.Z,{sx:O.postTopButtonsWrapper,className:"buttonsBar",children:(0,I.jsx)(m.Z,{collections:W,toggleSave:v,postId:k,isSaved:A,openModal:function(){return f(!0)}})}),(0,I.jsx)(C,{onToggleLike:function(){return b(k,T)},isLiked:T,likesCount:S})]}),(0,I.jsx)(d.Z,{position:"below",sx:{"& .MuiImageListItemBar-titleWrap":{padding:0}},title:(0,I.jsx)(L,{showAuthor:r,postId:k,title:w,formattedTags:F,authorId:_,avatarURL:E,username:N})})]},k)]})};var M=function(t){var e=t.posts,n=t.postsActions,o=a(),r=o.isSmallerThanLaptop,p=o.isSmallerThanTablet,u=r?p?2:3:5,d=Array.from({length:u}),h=(0,s.Z)(i.Z),x=function(t,e){for(var n=[],o=0;o<t;o++)for(var r=o;r<e.length;r+=t)n.push(e[r]);return n}(u,e);return(0,I.jsx)(l.Z,{sx:{display:"flex"},children:d.map((function(t,e){var o=Math.round(x.length/u)||1,r=x.slice(e*o,e*o+o);return(0,I.jsx)(c.Z,{variant:"masonry",sx:h.postsList,gap:12,cols:1,children:r.map((function(t){return(0,I.jsx)(S,{postsActions:n,post:t},t._id)}))},e)}))})}},8882:function(t,e,n){n.d(e,{Z:function(){return g}});var o=n(5051),r=n(6015),a=n(3811),s=n(2352),i=n(5348),l=n(4346),c=n(7205),p=n(694),u=n(91),d=(n(2791),n(306)),h=function(t){return{wrapper:{ml:"auto"},openMenuButton:{ml:"auto",color:t.palette.text.light},menuList:{backgroundColor:"rgba(0, 0, 0, 0.2)","& .MuiPaper-root":{bgcolor:"background.paper",maxHeight:"300px"},"& .MuiMenu-list":{bgcolor:"background.paper",py:0}},menuItem:{"&:hover .saveActionButton":{display:"flex"},bgcolor:"background.paper",position:"relative"},menuItemButton:{position:"absolute",right:8,display:"none"},staticButtonsWrapper:{bgcolor:"background.paper",px:1,py:1,position:"sticky",bottom:"-1px","&:hover":{bgcolor:"background.paper"}}}},x=n(2436),m=n(3329);var g=function(t){var e=t.collections,n=t.toggleSave,g=t.postId,f=t.isSaved,b=t.openModal,Z=(0,o.Z)(),v=Z.anchorEl,j=Z.isAnchorEl,k=Z.handleClick,y=Z.handleClose,w=(0,x.Z)({componentNameKey:"PostSavesInfo"}),I=(0,d.Z)(h);return(0,m.jsxs)(r.Z,{sx:I.wrapper,children:[(0,m.jsx)(a.Z,{id:"basic-button","aria-controls":j?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":j?"true":void 0,onClick:k,sx:I.openMenuButton,children:f?(0,m.jsx)(p.Z,{}):(0,m.jsx)(u.Z,{})}),(0,m.jsxs)(s.Z,{id:"basic-menu",anchorEl:v,open:j,onClose:y,MenuListProps:{"aria-labelledby":"basic-button"},sx:I.menuList,children:[e.map((function(t){var e=t.title,o=t.isSaved,r=t.collectionId,a=w(o?"deletePostButton":"savePostButton");return(0,m.jsxs)(i.Z,{sx:I.menuItem,onClick:function(){return function(t,e,o){y(),n(t,e,o)}(g,r,o)},children:[(0,m.jsx)(l.Z,{sx:{mr:1},children:e}),(0,m.jsx)(c.Z,{className:"saveActionButton",color:o?"error":"success",sx:I.menuItemButton,variant:"contained",children:a})]},r)})),(0,m.jsx)(r.Z,{sx:I.staticButtonsWrapper,children:(0,m.jsx)(c.Z,{variant:"contained",onClick:function(){y(),b()},children:w("createNewCollectionButton")})})]})]})}},111:function(t,e,n){var o=n(4942);e.Z=function(t){var e;return{container:{py:2,px:1,display:"flex",flexDirection:"row"},errorContainer:{margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",height:"90vh",maxHeight:"90vh"},postsList:(e={width:"20%"},(0,o.Z)(e,t.breakpoints.down("laptop"),{width:"33.33%"}),(0,o.Z)(e,t.breakpoints.down("tablet"),{width:"50%"}),(0,o.Z)(e,"margin",1),e)}}},5051:function(t,e,n){n.d(e,{Z:function(){return a}});var o=n(9439),r=n(2791);function a(){var t=(0,r.useState)(null),e=(0,o.Z)(t,2),n=e[0],a=e[1];return{anchorEl:n,setAnchorEl:a,isAnchorEl:Boolean(n),handleClick:function(t){a(t.currentTarget)},handleClose:function(){a(null)}}}}}]);
//# sourceMappingURL=67.099f9d9d.chunk.js.map