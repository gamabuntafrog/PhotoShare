"use strict";(self.webpackChunkphoto_share=self.webpackChunkphoto_share||[]).push([[523],{8041:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(6826),i=n(306),o=n(111);var a=n(6015),s=n(7964),c=n(3084),u=(n(2791),n(3329));var l=function(e){var t=e.posts,n=e.postsActions,l=(0,r.Z)(),d=l.isSmallerThanLaptop,f=l.isSmallerThanTablet,h=d?f?2:3:5,p=Array.from({length:h}),g=(0,i.Z)(o.Z),v=function(e,t){for(var n=[],r=0;r<e;r++)for(var i=r;i<t.length;i+=e)n.push(t[i]);return n}(h,t);return(0,u.jsx)(a.Z,{sx:{display:"flex"},children:p.map((function(e,t){var r=Math.round(v.length/h)||1,i=v.slice(t*r,t*r+r);return(0,u.jsx)(s.Z,{variant:"masonry",sx:g.postsList,gap:12,cols:1,children:i.map((function(e){return(0,u.jsx)(c.Z,{postsActions:n,post:e},e._id)}))},t)}))})}},9523:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var r=n(9439),i=n(803),o=n(4565),a=n(6015),s=n(2791),c=n(5802),u=n(7898),l=n(5444),d=n(306),f=n(111),h=n(2436),p=n(3433),g=n(5671),v=n(3144),y=n(136),Z=n(9388);function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}var x=new Map,w=new WeakMap,m=0,k=void 0;function j(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?(n=e.root)?(w.has(n)||(m+=1,w.set(n,m.toString())),w.get(n)):"0":e[t]);var n})).toString()}function V(e){var t=j(e),n=x.get(t);if(!n){var r,i=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var n,o=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=o),null==(n=i.get(t.target))||n.forEach((function(e){e(o,t)}))}))}),e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:i},x.set(t,n)}return n}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var o=V(n),a=o.id,s=o.observer,c=o.elements,u=c.get(e)||[];return c.has(e)||c.set(e,u),u.push(t),s.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(c.delete(e),s.unobserve(e)),0===c.size&&(s.disconnect(),x.delete(a))}}var O=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function E(e){return"function"!==typeof e.children}s.Component;function I(e){var t=e.isLoading,n=e.data,i=e.setPage,o=e.isError,a=e.page,c=(0,s.useState)(!1),u=(0,r.Z)(c,2),l=u[0],d=u[1],f=(0,s.useState)(n),h=(0,r.Z)(f,2),g=h[0],v=h[1],y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.threshold,i=t.delay,o=t.trackVisibility,a=t.rootMargin,c=t.root,u=t.triggerOnce,l=t.skip,d=t.initialInView,f=t.fallbackInView,h=t.onChange,p=s.useState(null),g=(0,r.Z)(p,2),v=g[0],y=g[1],Z=s.useRef(),b=s.useState({inView:!!d,entry:void 0}),x=(0,r.Z)(b,2),w=x[0],m=x[1];Z.current=h,s.useEffect((function(){var e;if(!l&&v)return e=S(v,(function(t,n){m({inView:t,entry:n}),Z.current&&Z.current(t,n),n.isIntersecting&&u&&e&&(e(),e=void 0)}),{root:c,rootMargin:a,threshold:n,trackVisibility:o,delay:i},f),function(){e&&e()}}),[Array.isArray(n)?n.toString():n,v,c,a,u,l,o,f,i]);var k=null==(e=w.entry)?void 0:e.target,j=s.useRef();v||!k||u||l||j.current===k||(j.current=k,m({inView:!!d,entry:void 0}));var V=[y,w.inView,w.entry];return V.ref=V[0],V.inView=V[1],V.entry=V[2],V}({threshold:0,rootMargin:a>1?"500px":"100px"}),Z=y.ref,b=y.inView;return(0,s.useEffect)((function(){o||n&&!t&&(n.length<1&&g.length>0?d(!0):v((function(e){return e.length<1?n:-1===n.findIndex((function(t){return t._id===e[e.length-1]._id}))?[].concat((0,p.Z)(e),(0,p.Z)(n)):e})))}),[n,t,b]),(0,s.useEffect)((function(){o||b&&!t&&i((function(e){return e+1}))}),[b]),{paginatedData:g,isEnd:l,ref:Z,inView:b}}var M=n(8041),A=n(5468),C=n(3329);var L=function(){var e=function(){var e=(0,s.useState)(1),t=(0,r.Z)(e,2),n=t[0],i=t[1],o=c.s4.useGetManyQuery({page:n}),a=o.data,u=void 0===a?[]:a,l=o.isLoading,d=o.error,f=I({isLoading:l,data:u,setPage:i,page:n,isError:!!d}),h=f.paginatedData,p=f.isEnd;return{data:h,isLoading:l,error:d,ref:f.ref,isEnd:p}}(),t=e.data,n=e.isLoading,p=e.error,g=e.ref,v=e.isEnd,y=(0,u.Z)({initPosts:t}),Z=(0,r.Z)(y,2),b=Z[0],x=Z[1],w=(0,d.Z)(f.Z),m=(0,h.Z)({componentNameKey:"Posts"});return(0,h.Z)({componentNameKey:"Helmet"}),n?(0,C.jsx)(l.Z,{withMeta:!0}):p?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(A.Z,{keyOfOther:"error"}),(0,C.jsx)(i.Z,{sx:w.errorContainer,children:(0,C.jsx)(o.Z,{variant:"h1",sx:{textAlign:"center"},children:m("error")})})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(A.Z,{keyOfTitle:"posts"}),(0,C.jsx)(a.Z,{sx:w.container,children:(0,C.jsx)(M.Z,{posts:b,postsActions:x})}),(0,C.jsx)("div",{ref:g}),v&&(0,C.jsx)(o.Z,{variant:"h4",textAlign:"center",sx:{my:2},children:"This is the end"})]})}},111:function(e,t,n){var r=n(4942);t.Z=function(e){var t;return{container:{py:2,px:1,display:"flex",flexDirection:"row"},errorContainer:{margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",height:"90vh",maxHeight:"90vh"},postsList:(t={width:"20%"},(0,r.Z)(t,e.breakpoints.down("laptop"),{width:"33.33%"}),(0,r.Z)(t,e.breakpoints.down("tablet"),{width:"50%"}),(0,r.Z)(t,"margin",1),t)}}},6826:function(e,t,n){var r=n(2797),i=n(4142);t.Z=function(){var e=(0,i.Z)();return{isSmallerThanLaptop:(0,r.Z)(e.breakpoints.down("laptop")),isSmallerThanTablet:(0,r.Z)(e.breakpoints.down("tablet")),isSmallerThanMobile:(0,r.Z)(e.breakpoints.down("mobile"))}}}}]);
//# sourceMappingURL=523.172f1f7b.chunk.js.map