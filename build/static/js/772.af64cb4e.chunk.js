"use strict";(self.webpackChunkphoto_share=self.webpackChunkphoto_share||[]).push([[772,542,67],{7758:function(t,e,n){n.d(e,{Z:function(){return B}});var r=n(1413),o=n(4165),a=n(5861),i=n(9439),s=n(9195),l=n(4695),c=n(6817),u=n(803),d=n(3811),p=n(4565),h=n(9365),x=n(6746),m=n(7205),f=(n(2791),n(7689)),g=n(4343),b=n(9823),Z=n(306),v=function(t){return{backdrop:{display:"flex",alignItems:"center",justifyContent:"center"},wrapper:{bgcolor:"background.default",mx:2,py:2,px:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",borderRadius:4},title:{color:t.palette.text.standard,textAlign:"center",mx:"auto",my:2,wordBreak:"break-word"},form:{display:"flex",flexDirection:"column",width:"90%"},label:{my:1},submitButton:{alignSelf:"end",mt:2}}},j=n(2436),y=n(5468),k=n(5592),w=n(1452),I=n(3329),C=function(t){return"function"===typeof t};var B=function(t){var e=t.closeModal,n=t.isModalOpen,B=t.onCreate,L=t.refetch,S=t.postId,M=w.Z.useCreateCollectionMutation(),T=(0,i.Z)(M,2),A=T[0],W=T[1].isLoading,E=(0,s.cI)({resolver:(0,l.X)(g.LP),mode:"all"}),_=E.register,O=E.reset,N=E.handleSubmit,F=E.formState.errors,P=F.title,z=F.tags,D=(0,f.s0)(),R=N((function(t){var e=t.title,n=t.tags.split(" ");U({title:e,tags:n})})),U=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n){var r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A({body:n}).unwrap();case 3:r=t.sent,O(),e(),C(B)&&B(n.title,r.data.collection._id,S),C(L)&&(L(),D("/post/create/".concat(r.data.collection._id))),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),H=(0,Z.Z)(v),K=(0,j.Z)({componentNameKey:"CreateCollectionModal"}),Y=null!==P&&void 0!==P&&P.message?K(P.message):K("titleLabel"),V=null!==z&&void 0!==z&&z.message?K(z.message):K("tagsLabel");return(0,I.jsxs)(I.Fragment,{children:[n&&(0,I.jsx)(y.Z,{keyOfTitle:"createCollectionModal"}),(0,I.jsx)(c.Z,{open:n,onClose:e,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:H.backdrop,children:(0,I.jsx)(u.Z,{sx:H.wrapper,maxWidth:"tablet",children:W?(0,I.jsx)(k.Z,{withMeta:!0}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.Z,{color:"error",sx:{alignSelf:"end"},onClick:e,children:(0,I.jsx)(b.Z,{})}),(0,I.jsx)(p.Z,{variant:"h3",sx:H.title,children:K("title")}),(0,I.jsxs)("form",{style:H.form,onSubmit:R,children:[(0,I.jsx)(h.Z,{htmlFor:"title",error:!!P,sx:H.label,children:Y}),(0,I.jsx)(x.Z,(0,r.Z)({fullWidth:!0,id:"title"},_("title"))),(0,I.jsx)(h.Z,{htmlFor:"tags",error:!!z,sx:H.label,children:V}),(0,I.jsx)(x.Z,(0,r.Z)({fullWidth:!0,id:"tags"},_("tags"))),(0,I.jsx)(m.Z,{type:"submit",variant:"outlined",sx:H.submitButton,children:K("submitButton")})]})]})})})]})}},5592:function(t,e,n){n.d(e,{Z:function(){return s}});var r=n(6015),o=n(6580),a=(n(2791),n(5468)),i=n(3329);function s(t){var e=t.size,n=t.bgOff,s=t.withMeta;return(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsx)(a.Z,{keyOfOther:"loading"}),(0,i.jsx)(r.Z,{sx:{bgcolor:n?"none":"background.default",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mt:7,position:"relative",width:e||"20vw",height:e||"20vh",mx:"auto"},children:(0,i.jsx)(r.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"},children:(0,i.jsx)(o.Z,{size:e||"20vw"})})})]})}},9067:function(t,e,n){n.r(e),n.d(e,{default:function(){return M}});var r=n(2797),o=n(4142),a=function(){var t=(0,o.Z)();return{isSmallerThanLaptop:(0,r.Z)(t.breakpoints.down("laptop")),isSmallerThanTablet:(0,r.Z)(t.breakpoints.down("tablet")),isSmallerThanMobile:(0,r.Z)(t.breakpoints.down("mobile"))}},i=n(306),s=n(111);var l=n(6015),c=n(7964),u=n(9439),d=n(7083),p=n(5226),h=n(1087),x=n(2791),m=n(8882),f=n(7758),g=n(4942),b=n(277),Z=function(t){return{postItem:{display:"inline-block","&:hover .buttonsBar":{opacity:1},width:"100%"},postItemWrapper:{position:"relative","&:hover .postImage":{filter:"brightness(80%)"}},image:{width:"100%",borderRadius:"8px",backgroundColor:t.palette.primary.main},postTopButtonsWrapper:(0,g.Z)({display:"flex",alignItems:"center",padding:.5,position:"absolute",top:"0",right:"0",zIndex:100,opacity:0},t.breakpoints.down("laptop"),{opacity:100}),postBottomButtonsWrapper:(0,g.Z)({display:"flex",alignItems:"center",padding:.5,position:"absolute",top:"100%",transform:"translateY(-110%)",zIndex:100,opacity:0,color:t.palette.text.light},t.breakpoints.down("laptop"),{opacity:100}),postItemTitleWrapper:(0,g.Z)({px:.5,pb:1,whiteSpace:"break-spaces",wordBreak:"break-all"},t.breakpoints.down("tablet"),{pl:.5,pr:0,pb:0}),authorAvatar:(0,g.Z)({width:"40px",height:"40px"},t.breakpoints.down("tablet"),{width:32,height:32}),authorUsername:{ml:1}}},v=(0,b.ZP)(h.OL)((function(t){return{display:"flex",alignItems:"center",justifyContent:"start","&:hover p":{color:t.theme.palette.primary.main}}})),j=n(3811),y=n(4565),k=n(7237),w=n(7488),I=n(3329);function C(t){var e=t.onToggleLike,n=t.isLiked,r=t.likesCount,o=(0,i.Z)(Z);return(0,I.jsxs)(l.Z,{sx:o.postBottomButtonsWrapper,className:"buttonsBar",children:[(0,I.jsx)(j.Z,{sx:{color:"currentColor"},onClick:e,children:n?(0,I.jsx)(k.Z,{color:"secondary"}):(0,I.jsx)(w.Z,{})}),(0,I.jsx)(y.Z,{sx:{ml:.5,color:"currentColor"},children:r})]})}var B=n(3978);function L(t){var e=t.postId,n=t.title,r=t.formattedTags,o=t.authorId,a=t.avatarURL,s=t.username,c=t.showAuthor,u=(0,i.Z)(Z);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.Z,{sx:u.postItemTitleWrapper,children:(0,I.jsxs)(h.OL,{to:"/posts/".concat(e),children:[(0,I.jsx)(y.Z,{sx:{mb:"-4px"},variant:"h6",children:n}),(0,I.jsx)(y.Z,{variant:"caption",children:r})]})}),c&&(0,I.jsxs)(v,{to:"/users/".concat(o),children:[(0,I.jsx)(B.Z,{sx:u.authorAvatar,src:a||""}),(0,I.jsx)(y.Z,{className:"username",sx:u.authorUsername,children:s})]})]})}var S=function(t){var e=t.post,n=t.postsActions,r=t.showAuthor,o=void 0===r||r,a=(0,x.useState)(!1),s=(0,u.Z)(a,2),c=s[0],g=s[1],b=n.toggleLike,v=n.toggleSave,j=n.updateSavesInfo,y=e._id,k=e.author,w=e.title,B=e.tags,S=e.likesCount,M=e.image,T=e.isLiked,A=e.isSomewhereSaved,W=e.savesInfo,E=k.username,_=k._id,O=k.avatar,N=void 0===O?"":O,F=B.join(" "),P=(0,i.Z)(Z);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(f.Z,{onCreate:j,postId:e._id,closeModal:function(){return g(!1)},isModalOpen:c}),(0,I.jsxs)(d.Z,{sx:P.postItem,children:[(0,I.jsxs)(l.Z,{sx:P.postItemWrapper,children:[(0,I.jsx)(h.OL,{to:"/posts/".concat(y),children:(0,I.jsx)("img",{src:M,style:P.image,className:"postImage",alt:w,loading:"lazy",role:"presentation",decoding:"async"})}),(0,I.jsx)(l.Z,{sx:P.postTopButtonsWrapper,className:"buttonsBar",children:(0,I.jsx)(m.Z,{collections:W,toggleSave:v,postId:y,isSaved:A,openModal:function(){return g(!0)}})}),(0,I.jsx)(C,{onToggleLike:function(){return b(y,T)},isLiked:T,likesCount:S})]}),(0,I.jsx)(p.Z,{position:"below",sx:{"& .MuiImageListItemBar-titleWrap":{padding:0}},title:(0,I.jsx)(L,{showAuthor:o,postId:y,title:w,formattedTags:F,authorId:_,avatarURL:N,username:E})})]},y)]})};var M=function(t){var e=t.posts,n=t.postsActions,r=a(),o=r.isSmallerThanLaptop,u=r.isSmallerThanTablet,d=o?u?2:3:5,p=Array.from({length:d}),h=(0,i.Z)(s.Z),x=function(t,e){for(var n=[],r=0;r<t;r++)for(var o=r;o<e.length;o+=t)n.push(e[o]);return n}(d,e);return(0,I.jsx)(l.Z,{sx:{display:"flex"},children:p.map((function(t,e){var r=Math.round(x.length/d)||1,o=x.slice(e*r,e*r+r);return(0,I.jsx)(c.Z,{variant:"masonry",sx:h.postsList,gap:12,cols:1,children:o.map((function(t){return(0,I.jsx)(S,{postsActions:n,post:t},t._id)}))},e)}))})}},8882:function(t,e,n){n.d(e,{Z:function(){return f}});var r=n(5051),o=n(6015),a=n(3811),i=n(2352),s=n(5348),l=n(4346),c=n(7205),u=n(694),d=n(91),p=(n(2791),n(306)),h=function(t){return{wrapper:{ml:"auto"},openMenuButton:{ml:"auto",color:t.palette.text.light},menuList:{backgroundColor:"rgba(0, 0, 0, 0.2)","& .MuiPaper-root":{bgcolor:"background.paper",maxHeight:"300px"},"& .MuiMenu-list":{bgcolor:"background.paper",py:0}},menuItem:{"&:hover .saveActionButton":{display:"flex"},bgcolor:"background.paper",position:"relative"},menuItemButton:{position:"absolute",right:8,display:"none"},staticButtonsWrapper:{bgcolor:"background.paper",px:1,py:1,position:"sticky",bottom:"-1px","&:hover":{bgcolor:"background.paper"}}}},x=n(2436),m=n(3329);var f=function(t){var e=t.collections,n=t.toggleSave,f=t.postId,g=t.isSaved,b=t.openModal,Z=(0,r.Z)(),v=Z.anchorEl,j=Z.isAnchorEl,y=Z.handleClick,k=Z.handleClose,w=(0,x.Z)({componentNameKey:"PostSavesInfo"}),I=(0,p.Z)(h);return(0,m.jsxs)(o.Z,{sx:I.wrapper,children:[(0,m.jsx)(a.Z,{id:"basic-button","aria-controls":j?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":j?"true":void 0,onClick:y,sx:I.openMenuButton,children:g?(0,m.jsx)(u.Z,{}):(0,m.jsx)(d.Z,{})}),(0,m.jsxs)(i.Z,{id:"basic-menu",anchorEl:v,open:j,onClose:k,MenuListProps:{"aria-labelledby":"basic-button"},sx:I.menuList,children:[e.map((function(t){var e=t.title,r=t.isSaved,o=t.collectionId,a=w(r?"deletePostButton":"savePostButton");return(0,m.jsxs)(s.Z,{sx:I.menuItem,onClick:function(){return function(t,e,r){k(),n(t,e,r)}(f,o,r)},children:[(0,m.jsx)(l.Z,{sx:{mr:1},children:e}),(0,m.jsx)(c.Z,{className:"saveActionButton",color:r?"error":"success",sx:I.menuItemButton,variant:"contained",children:a})]},o)})),(0,m.jsx)(o.Z,{sx:I.staticButtonsWrapper,children:(0,m.jsx)(c.Z,{variant:"contained",onClick:function(){k(),b()},children:w("createNewCollectionButton")})})]})]})}},111:function(t,e,n){var r=n(4942);e.Z=function(t){var e;return{container:{py:2,px:1,display:"flex",flexDirection:"row"},errorContainer:{margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",height:"90vh",maxHeight:"90vh"},postsList:(e={width:"20%"},(0,r.Z)(e,t.breakpoints.down("laptop"),{width:"33.33%"}),(0,r.Z)(e,t.breakpoints.down("tablet"),{width:"50%"}),(0,r.Z)(e,"margin",1),e)}}},5051:function(t,e,n){n.d(e,{Z:function(){return a}});var r=n(9439),o=n(2791);function a(){var t=(0,o.useState)(null),e=(0,r.Z)(t,2),n=e[0],a=e[1];return{anchorEl:n,setAnchorEl:a,isAnchorEl:Boolean(n),handleClick:function(t){a(t.currentTarget)},handleClose:function(){a(null)}}}},8338:function(t,e,n){n.d(e,{Z:function(){return s}});var r=n(3433),o=n(9439),a=n(2791),i=n(9348);function s(t){var e=t.trigger,n=t.isLoading,s=t.isError,l=t.id,c=t.data,u=(0,a.useState)(!1),d=(0,o.Z)(u,2),p=d[0],h=d[1],x=(0,a.useState)(c),m=(0,o.Z)(x,2),f=m[0],g=m[1],b=(0,i.YD)({threshold:0,rootMargin:"500px"}),Z=b.ref,v=b.inView;return(0,a.useLayoutEffect)((function(){g([]),h(!1)}),[l]),(0,a.useLayoutEffect)((function(){s||c.length<1||n||(c.length<1&&f.length>0?h(!0):(c.length<15&&h(!0),g((function(t){return t.length<1?c:-1===c.findIndex((function(e){return e._id===t[t.length-1]._id}))?[].concat((0,r.Z)(t),(0,r.Z)(c)):t}))))}),[c]),(0,a.useLayoutEffect)((function(){if(!s&&v&&!n&&!p){var t=f.map((function(t){return t._id}));e({arrayOfId:t,id:l})}}),[v,l]),{paginatedData:f,ref:Z,isEnd:p}}}}]);
//# sourceMappingURL=772.af64cb4e.chunk.js.map