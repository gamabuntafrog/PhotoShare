"use strict";(self.webpackChunkphoto_share=self.webpackChunkphoto_share||[]).push([[287],{6287:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(9439),i=t(803),a=t(4565),s=t(6015),o=t(2791),c=t(7898),f=t(5444),u=t(306),d=t(111),h=t(2436),l=t(5468),g=t(4701),p=t(9650);var Z=t(3329),x=o.lazy((function(){return Promise.all([t.e(695),t.e(224),t.e(542)]).then(t.bind(t,9067))}));var v=function(){var e=function(){var e=p.Z.useLazyGetManyQuery(),n=(0,r.Z)(e,2),t=n[0],i=n[1],a=i.data,s=void 0===a?[]:a,o=i.isLoading,c=i.isError,f=(0,g.Z)({isLoading:o,data:s,isError:c,triggerCallback:function(e){var n=e.page,r=u.map((function(e){return e._id}));t({page:n,arrayOfId:r})}}),u=f.paginatedData,d=f.isEnd,h=f.ref;return{data:u,isLoading:o,error:c,ref:h,isEnd:d}}(),n=e.data,t=e.isLoading,o=e.error,v=e.ref,y=e.isEnd,j=(0,c.Z)({initPosts:n}),m=(0,r.Z)(j,2),w=m[0],E=m[1],k=(0,u.Z)(d.Z),b=(0,h.Z)({componentNameKey:"Posts"});return t?(0,Z.jsx)(f.Z,{withMeta:!0}):o?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(l.Z,{keyOfOther:"error"}),(0,Z.jsx)(i.Z,{sx:k.errorContainer,children:(0,Z.jsx)(a.Z,{variant:"h1",sx:{textAlign:"center"},children:b("error")})})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(l.Z,{keyOfTitle:"posts"}),(0,Z.jsx)(s.Z,{sx:k.container,children:(0,Z.jsx)(x,{posts:w,postsActions:E})}),(0,Z.jsx)("div",{ref:v}),y&&(0,Z.jsx)(a.Z,{variant:"h4",textAlign:"center",sx:{my:2},children:"This is the end"})]})}},111:function(e,n,t){var r=t(4942);n.Z=function(e){var n;return{container:{py:2,px:1,display:"flex",flexDirection:"row"},errorContainer:{margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",height:"90vh",maxHeight:"90vh"},postsList:(n={width:"20%"},(0,r.Z)(n,e.breakpoints.down("laptop"),{width:"33.33%"}),(0,r.Z)(n,e.breakpoints.down("tablet"),{width:"50%"}),(0,r.Z)(n,"margin",1),n)}}},4701:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(3433),i=t(9439),a=t(2791),s=t(9348);function o(e){var n=e.isLoading,t=e.data,o=e.isError,c=e.triggerCallback,f=e.refetchDependencies,u=void 0===f?[]:f,d=(0,a.useState)(!1),h=(0,i.Z)(d,2),l=h[0],g=h[1],p=(0,a.useState)(t),Z=(0,i.Z)(p,2),x=Z[0],v=Z[1],y=(0,a.useState)(1),j=(0,i.Z)(y,2),m=j[0],w=j[1],E=(0,s.YD)({threshold:0,rootMargin:m>1?"500px":"100px"}),k=E.ref,b=E.inView;return(0,a.useEffect)((function(){console.log("refetch"),w(1),v([]),g(!1),c({page:1})}),(0,r.Z)(u)),(0,a.useEffect)((function(){o||t.length<1||n||(t.length<1&&x.length>0?g(!0):(t.length<15&&g(!0),v((function(e){return e.length<1?t:-1===t.findIndex((function(n){return n._id===e[e.length-1]._id}))?[].concat((0,r.Z)(e),(0,r.Z)(t)):e}))))}),[t,n,b]),(0,a.useEffect)((function(){o||b&&!n&&(l||w((function(e){return e+1})))}),[b]),(0,a.useEffect)((function(){c({page:m})}),[m]),{paginatedData:x,isEnd:l,ref:k,inView:b,page:m}}}}]);
//# sourceMappingURL=287.06467fbc.chunk.js.map