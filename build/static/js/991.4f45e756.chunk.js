"use strict";(self.webpackChunkphoto_share=self.webpackChunkphoto_share||[]).push([[991],{2991:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var t=r(4165),i=r(5861),o=r(9439),c=r(6817),s=r(6015),a=r(4565),l=r(3811),d=r(7603),u=r(3671),x=r(1267),h=r(1889),p=r(7205),Z=r(9823),f=r(1131),j=r(2791),v=r(306),b=r(7033),C=r(5802),m=r(7689),w=r(2436),k=r(3329),y=j.lazy((function(){return r.e(253).then(r.bind(r,253))})),g=j.lazy((function(){return r.e(379).then(r.bind(r,379))})),I=j.lazy((function(){return Promise.all([r.e(87),r.e(799)]).then(r.bind(r,8799))})),W=j.lazy((function(){return Promise.all([r.e(87),r.e(612)]).then(r.bind(r,4612))}));var U=function(e){new ResizeObserver((function(n){var r=(0,o.Z)(n,1)[0];Math.ceil(r.contentRect.height)===Math.ceil(window.innerHeight)?e.style.borderRadius="0px":"0px"===e.style.borderRadius&&(e.style.borderRadius="8px")})).observe(e)};var A=function(e){var n=e.data,r=e.closeSettingsModal,A=e.isSettingsOpen,T=n.collection,M=n.currentUserStatus,R=T._id,z=T.title,P=T.tags,S=T.authors,D=T.isPrivate,B=T.viewers,F=(0,v.Z)(b.Z),L=function(e){var n=e.ifNodeFunction,r=(0,j.useRef)(null);return[(0,j.useCallback)((function(e){r.current,e&&n(e),r.current=e}),[])]}({ifNodeFunction:U}),N=(0,o.Z)(L,1)[0],_=(0,m.s0)(),O=C.WU.useChangeIsPrivateMutation(),H=(0,o.Z)(O,1)[0],K=C.WU.useDeleteCurrentUserFromCollectionMutation(),q=(0,o.Z)(K,1)[0],E=C.WU.useDeleteCollectionMutation(),G=(0,o.Z)(E,1)[0],J=j.useState(!1),Q=(0,o.Z)(J,2),V=Q[0],X=Q[1],Y=function(e){return function(n,r){X(!!r&&e)}},$=function(){return X("panel1")},ee=(M.isAuthor,M.isAdmin),ne=P.join(" "),re=(0,w.Z)({componentNameKey:"Collection.CollectionSettings"}),te=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(re("isUserWantToLeave"))){e.next=3;break}return e.next=3,q({collectionId:R}).then((function(){return _("/")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee||!window.confirm(re("isUserWantToDeleteCollection"))){e.next=3;break}return e.next=3,G({id:R}).then((function(){return _("/")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)(c.Z,{open:A,onClose:r,sx:F.backdrop,children:(0,k.jsxs)(s.Z,{sx:F.modalWrapper,ref:N,children:[(0,k.jsxs)(s.Z,{sx:F.closeIconWrapper,children:[(0,k.jsx)(a.Z,{variant:"body1",sx:F.title,children:re("title")}),(0,k.jsx)(l.Z,{onClick:r,sx:F.closeIcon,color:"error",children:(0,k.jsx)(Z.Z,{})})]}),(0,k.jsxs)(s.Z,{sx:F.modalContainer,children:[(0,k.jsx)(y,{collectionId:R,isAdmin:ee,title:z,tags:ne}),ee&&(0,k.jsxs)(d.Z,{sx:F.accordionWrapper,expanded:"panel1"===V,onChange:Y("panel1"),children:[(0,k.jsx)(u.Z,{expandIcon:(0,k.jsx)(f.Z,{color:"primary"}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:(0,k.jsx)(a.Z,{sx:F.accordionTitle,children:re("addUsersTitle")})}),(0,k.jsx)(x.Z,{children:(0,k.jsx)(g,{collectionId:R})})]}),(0,k.jsxs)(d.Z,{sx:F.accordionWrapper,expanded:"panel2"===V,onChange:Y("panel2"),children:[(0,k.jsx)(u.Z,{expandIcon:(0,k.jsx)(f.Z,{color:"primary"}),"aria-controls":"panel2bh-content",id:"panel2bh-header",children:(0,k.jsx)(a.Z,{sx:F.accordionTitle,children:re("authorsListTitle")})}),(0,k.jsx)(x.Z,{children:(0,k.jsx)(I,{isAdmin:ee,authors:S,collectionId:R,openAddUserAccordion:$})})]}),(0,k.jsxs)(d.Z,{sx:F.accordionWrapper,expanded:"panel3"===V,onChange:Y("panel3"),children:[(0,k.jsx)(u.Z,{expandIcon:(0,k.jsx)(f.Z,{color:"primary"}),"aria-controls":"panel3bh-content",id:"panel3bh-header",children:(0,k.jsx)(a.Z,{sx:F.accordionTitle,children:re("viewersListTitle")})}),(0,k.jsx)(x.Z,{children:(0,k.jsx)(W,{isAdmin:ee,openAddUserAccordion:$,viewers:B,collectionId:R})})]}),ee&&(0,k.jsxs)(s.Z,{sx:F.togglePrivateContainer,children:[(0,k.jsxs)(s.Z,{children:[(0,k.jsx)(a.Z,{children:re("privateModeTitle")}),(0,k.jsx)(a.Z,{variant:"caption",sx:{color:"text.secondary"},children:re("privateModeDescription")})]}),(0,k.jsx)(h.Z,{checked:D,onClick:function(){return H({collectionId:R})}})]}),(0,k.jsxs)(s.Z,{sx:F.dangerButtonsWrapper,children:[ee&&(0,k.jsx)(p.Z,{onClick:ie,color:"error",variant:"contained",sx:{mr:2},children:re("deleteCollectionButton")}),(0,k.jsx)(p.Z,{onClick:te,color:"error",variant:"contained",children:re("leaveCollectionButton")})]})]})]})})}}}]);
//# sourceMappingURL=991.4f45e756.chunk.js.map